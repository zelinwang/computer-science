# C++的三大特性：继承、多态、封装

## 一、封装

隐藏对象的属性和实现细节，仅对外公开接口和对象进行交互，将数据和操作数据的方法进行有机结合。

封装性是由编译器去识别关键字public、private和protected来实现的，体现在类的成员可以有公有成员(public)，私有成员(private)，保护成员(protected)。

### 一）访问限定符

1. public（公有）
2. protected（保护）
3. private（私有）

**说明**

- public成员可以在类外直接访问。
- protected和private成员在类外（在此将这两种限定符都可以看成是私有的，在继承出区别）不能够访问。
- 它们的作用域从该访问限定符出现的位置开始直到下一个访问限定符出现时为止。
- class的默认访问权限是private，而struct为public型(因为struct要兼容C)。C++常用的是class
- 类外：即脱离了类的作用域或者说访问时不在类的成员函数中。
- 公有成员是封装体与外界的一个接口，类体外的函数可以访问公有成员
- 保护成员是只有该类的成员函数和该类的派生类才可以访问的。
- 私有成员是在封装体内被隐藏的部分，只有类体内说明的函数(类的成员函数)才可以访问私有成员，而在类体外的函数时不能访问的

**注意：访问限定符本质上是给编译器使用的，数据放在内存中是没有任何限制的**

### 二）类的作用域

- 局部作用域
- 全局作用域
- 类作用域
- 名字空间作用域

（1） 在类体外定义成员，需要使用 :: 作用域解析符指明成员属于哪个类域。
（2） 在类的作用域外，只能够通过对象或指针借助成员访问操作符.和->来访问类成员，跟在访问操作符后面的名字必须在相关联类的作用域中。
（3）成员变量在类中具有全局作用域。

优点：隔离变化；便于使用；提高重用性；提高安全性
缺点：如果封装太多，影响效率；使用者不能知道代码具体实现。

## 二、继承

被继承的是父类（基类），继承出来的类是子类（派生类），子类拥有父类的所有的特性。

继承方式有公有继承、私有继承，保护继承。默认是私有继承

公有继承中父类的公有和保护成员在子类中不变，私有的在子类中不可访问。
私有继承中父类的公有和保护成员在子类中变为私有，但私有的在子类中不可访问。
保护继承中父类的公有和保护成员在子类中变为保护，但私有的在子类中不可访问。

C++语言允许单继承和多继承，

继承种类：

1. **单一继承：**继承一个父类，这种继承称为单一继承，一般情况尽量使用单一继承，使用多重继承容易造成混乱易出问题
2. **多重继承：**继承多个父类，类与类之间要用逗号隔开，类名之前要有继承权限，假使两个或两个基类都有某变量或函数，在子类中调用时需要加类名限定符如c.a::i = 1；
3. **菱形继承：**多重继承掺杂隔代继承1-n-1模式，此时需要用到虚继承，例如 B，C虚拟继承于A，D再多重继承B，C，否则会出错

4. **继承权限：**继承方式规定了如何访问继承的基类的成员。继承方式指定了派生类成员以及类外对象对于从基类继承来的成员的访问权限

5. **继承权限：**子类继承基类除构造和析构函数以外的所有成员


优点：继承减少了重复的代码、继承是多态的前提、继承增加了类的耦合性；
缺点：继承在编译时刻就定义了，无法在运行时刻改变父类继承的实现；父类通常至少定义了子类的部分行为，父类的改变都可能影响子类的行为；如果继承下来的子类不适合解决新问题，父类必须重写或替换，那么这种依赖关系就限制了灵活性，最终限制了复用性。
虚继承：为了解决多重继承中的二义性问题，它维护了一张虚基类表。

## 三、多态

多态性可以简单地概括为“一个接口，多种方法”，字面意思为多种形态。程序在运行时才决定调用的函数，它是面向对象编程领域的核心概念。比如函数重载、运算符重载、虚函数等。
C++有两种多态，称为动态多态（运行期多态）和静态多态（编译器多态），静态多态是通过模板，函数重载，运算符重载来实现，而动态多态是通过虚函数来实现的。即在基类中存在虚函数（一般为纯虚函数）子类通过重载这些接口，使用基类的指针或者引用指向子类的对象，就可以调用子类对应的函数，动态多态的函数调用机制是执行器期才能确定的，所以他是动态的。

优点：大大提高了代码的可复用性；提高了了代码的可维护性，可扩充性；
缺点：易读性比较不好，调试比较困难； 模板只能定义在头文件中，当工程大了之后，编译时间十分的变态；
