TCP/IP协议是一个协议簇。里面包括很多协议的。UDP只是其中的一个。之所以命名为TCP/IP协议，因为TCP，IP协议是两个很重要的协议，就用他两命名了。
TCP/IP协议集包括应用层，传输层，网络层，网络访问层。

## 一、TCP和UDP的区别

**TCP**：是需要建立连接的，面向字节流的、提供可靠性的传输服务，相对于UDP的传输速度慢，对系统资源要求多（头部开销大），占用20字节。

**UDP**：是不需要建立连接的，面向报文的，不可靠传输服务，传输速度快，协议要求少，头部只占用8字节。

## 二、为什么说TCP面向字节流，UDP面向报文？

应用程序使用UDP协议时，每一次调用send函数，send的内容就是一段报文，UDP会将应用程序发来的数据在收到的那一刻，立即按照原样发送到网络上的一种机制，所以是面向报文；

而使用TCP协议的话，调用一次send函数，这段报文并不会马上被发送出去，这段数据会以字节流的方式先存入TCP/IP协议栈中，什么时候发送是TCP决定的（有可能你调几次send才会发）。所以说TCP是面向字节流。

## 三、UDP的缺点

1、即使出现网络拥堵的情况下，UDP也无法进行流量控制的网络拥塞的行为；

2、传输过程中即使出现丢包，UDP也不负责重发；

3、即使出现包到达顺序错乱时也没有纠正功能；

（如果需要这些细节控制，一般交由采用UDP的应用程序去处理）

## 四、TCP和UDP的应用场景

UDP主要用于那些对高速传输和实时性较高的要求的通信或广播通信，例如：电话，视频电话(即使交流过程中出现一两个字听不清，也不影响正常交流)。

TCP用于那些对实时性要求不是很高的场景,例如：网络直播（有延迟）。

# 五、用UDP实现可靠性传输

要保证可靠传输需要实现**确认机制、重传机制、滑动窗口**。

UDP它不属于连接型协议，因而具有资源消耗小，处理速度快的优点，所以通常音频、视频和普通数据在传送时使用UDP较多，因为它们即使偶尔丢失一两个数据包，也不会对接收结果产生太大影响。

传输层无法保证数据的可靠传输，只能通过应用层来实现了。实现的方式可以参照tcp可靠性传输的方式，只是实现不在传输层，实现转移到了应用层。

如果不利用Linux协议栈以及上层socket机制，自己通过抓包和发包的方式去实现可靠性传输，那么必须实现如下功能：

发送：包的分片、包确认、包的重发

接收：包的调序、包的序号确认

目前有如下开源程序利用UDP实现了可靠的数据传输。分别为RUDP、RTP、UDT





