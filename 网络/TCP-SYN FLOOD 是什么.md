## 一、半连接、半打开、半关闭状态

- **半连接状态**：发生在TCP三次握手过程中，客户端向服务器发起连接，服务器也进行了回应，但是**客户端却不进行第3次握手**。
- **半打开状态**：在TCP连接中，如果**某一端关闭了连接或者是异常关闭**，则该连接处于半打开状态。**解决半打开问题：引入心跳机制就可以察觉半打开状态**。
- **半关闭状态**：发生在四次挥手过程中，当TCP连接中**客户端向服务器发送 FIN 请求关闭，服务端回应ACK之后，并没有立即发送 FIN 给客户端，客户端就处于半关闭状态**，此时客户端可以接收服务器发送的数据，但是客户端已经不能再向服务器发送数据。

## 二、SYN攻击

在三次握手过程中，Server发送SYN-ACK之后，收到Client的ACK之前的TCP连接称为半连接（half-open connect），此时Server处于SYN_RCVD状态，当收到ACK后，Server转入ESTABLISHED状态。

SYN攻击就是Client在短时间内伪造大量不存在的IP地址，并向Server不断地发送SYN包，Server回复确认包，并等待Client的确认，由于源地址是不存在的，因此，Server需要不断重发直至超时，这些伪造的SYN包将产时间占用未连接队列，导致正常的SYN请求因为队列满而被丢弃，从而引起网络堵塞甚至系统瘫痪。SYN攻击时一种典型的DDOS攻击，检测SYN攻击的方式非常简单，即当Server上有大量半连接状态且源IP地址是随机的，则可以断定遭到SYN攻击了，使用如下命令可以让之现行：#netstat -nap | grep SYN_RECV